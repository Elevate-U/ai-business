import{a as N,b as j,A as E,e as q,$ as g,u as e,L as G}from"./index-_qC34Ia1.js";import{d as i,y as u,q as y}from"./react-vendor-BYlzYzcd.js";import{M as P}from"./MovieCard-Co4wMSA7.js";/* empty css             */const J=()=>{const[m,f]=i(!0),[v,S]=i([]),[W,L]=i([]),[R,M]=i([]),[A,B]=i([]),[w,O]=i([]),[T,l]=i(null),[b,$]=i(!0),{user:o}=N(),{continueWatching:x,continueWatchingFetched:_,fetchContinueWatching:D}=j();u(()=>{o&&!_&&D(o.id)},[o,_,D]);const k=x.filter(n=>n.type==="anime"),r=y(async(n,a=3)=>{try{const t=await fetch(`${E}/tmdb/discover/tv?with_genres=16&${n}`);if(!t.ok)throw new Error(`TMDB API error: ${t.status}`);return(await t.json()).results.map(p=>({...p,media_type:"tv"}))}catch(t){return console.error(`Error fetching from TMDB endpoint ${n}:`,t),a>0?(await new Promise(c=>setTimeout(c,1e3*(4-a))),r(n,a-1)):[]}},[]),C=y(async n=>{if(o){const a=await q(o.id,n.id);a?g(`/watch/tv/${n.id}/season/${a.season}/episode/${a.episode}`):g(`/watch/tv/${n.id}/season/1/episode/1`)}else g(`/tv/${n.id}`)},[o]),d=y(async()=>{try{const n=await fetch(`${E}/health/videasy`,{method:"GET",signal:AbortSignal.timeout(5e3)});$(n.ok)}catch(n){console.warn("Videasy availability check failed:",n),$(!1)}},[]);u(()=>{d()},[d]),u(()=>{(async()=>{f(!0),l(null);try{const[a,t,c,p,F]=await Promise.all([r("sort_by=popularity.desc&page=1"),r("air_date.gte=2024-01-01&sort_by=popularity.desc"),r("sort_by=popularity.desc&page=2"),r("sort_by=popularity.desc&page=3"),r("sort_by=vote_average.desc&vote_count.gte=100")]);S(a),L(t),M(c),B(p),O(F)}catch(a){console.error("Error fetching anime data from TMDB:",a),l("Failed to load anime data. Please refresh the page.")}finally{f(!1)}})()},[r]);const s=(n,a)=>!a||a.length===0?null:e("section",{class:"home-section",children:[e("h2",{children:n}),e("div",{class:"scrolling-row",children:a.map(t=>e(P,{item:t,type:"anime",onClick:()=>C(t)},`${n}-${t.id}`))})]}),h=()=>e("div",{class:"service-status",children:e("div",{class:`status-indicator ${b?"online":"offline"}`,children:[e("span",{class:"status-dot"}),"Videasy: ",b?"Online":"Offline"]})}),V=({error:n,onRetry:a})=>e("div",{class:"error-container",children:[e("div",{class:"error-message",children:[e("h3",{children:"Something went wrong"}),e("p",{children:n}),e("button",{onClick:a,class:"retry-button",children:"Try Again"})]}),e(h,{})]});return m?e("div",{class:"container home-page anime-page",children:[e("h1",{class:"main-title",children:"Anime"}),e(h,{}),e(G,{text:"Loading anime..."})]}):T?e("div",{class:"container home-page anime-page",children:[e("h1",{class:"main-title",children:"Anime"}),e(V,{error:T,onRetry:()=>{l(null),d()}})]}):e("div",{class:"container home-page anime-page",children:[e("h1",{class:"main-title",children:"Anime"}),e("div",{class:"anime-controls",children:e(h,{})}),k.length>0&&e("section",{class:"home-section",children:[e("h2",{children:"Continue Watching"}),e("div",{class:"scrolling-row scrolling-row--compact",children:k.map(n=>e(P,{item:n,type:"anime",progress:n.progress_seconds,duration:n.duration_seconds,onClick:()=>C(n)},`continue-watching-${n.id}`))})]}),s("Trending Now",v),s("Airing Today",W),s("Currently On The Air",R),s("Popular Anime",A),s("Top Rated Anime",w),!m&&v.length===0&&A.length===0&&w.length===0&&e("div",{class:"no-content",children:[e("h3",{children:"No anime content available"}),e("p",{children:"Please check your connection and try again."})]})]})};export{J as default};
//# sourceMappingURL=Anime-DlKwwLXX.js.map
