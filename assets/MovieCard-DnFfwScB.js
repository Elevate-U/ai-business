import{a as Z,b as y,j as L,I as ee,u as t,$ as se}from"./index-CKu1wh72.js";import{q as p,d as te}from"./react-vendor-BYlzYzcd.js";const le=({item:s,type:a,progress:b,duration:_,showDeleteButton:D,onDelete:N,onClick:$})=>{const{id:ae,title:P,name:j,poster_path:R,still_path:H,vote_average:x,episode_name:E,season_number:w,episode_number:A,first_air_date:S,release_date:I,number_of_seasons:m,status:M,episodes:C,format:f,nextAiringEpisode:h,studios:g,genres:ne}=s,o=H||R,r=j||P,U=typeof r=="object"&&r!==null?r.english||r.romaji||r.native:r,T=b&&_>0?b/_*100:0,l=I||S?new Date(I||S).getFullYear():null,{user:d}=Z(),{addFavorite:B,removeFavorite:G,isShowFavorited:Y,favoritesFetched:q}=y(),v=Y(s.id,a,s.season_number,s.episode_number),z=e=>{e.preventDefault(),e.stopPropagation(),d&&(v?G(d.id,s.id,a,s.season_number,s.episode_number):B(d.id,{...s,type:a}))},O=e=>{if(e.preventDefault(),e.stopPropagation(),$)$(s);else{const n=a==="anime"&&s.anilist_id?s.anilist_id:s.id;let i=`/watch/${a}/${n}`;(a==="tv"||a==="anime")&&s.season_number&&s.episode_number&&(i+=`/season/${s.season_number}/episode/${s.episode_number}`),se(i)}},F=(()=>{if((a==="tv"||a==="anime")&&w&&A)return`S${w} E${A}${E?`: ${E}`:""}`;if(a==="anime"){const e=[];return l&&e.push(l.toString()),C&&e.push(`${C} episodes`),f&&f!=="TV"&&e.push(f),e.length>0?e.join(" • "):"Anime"}else{if(a==="tv"&&m)return`${l||"Unknown"} • ${m} Season${m!==1?"s":""}`;if(a==="movie"&&l)return l.toString()}return null})(),V=()=>{if(a!=="anime"||!M)return null;const n={RELEASING:{text:"Airing",class:"airing"},FINISHED:{text:"Completed",class:"completed"},NOT_YET_RELEASED:{text:"Upcoming",class:"upcoming"},CANCELLED:{text:"Cancelled",class:"cancelled"},HIATUS:{text:"Hiatus",class:"hiatus"}}[M];return n?t("div",{className:`anime-status-badge ${n.class}`,children:n.text}):null},W=()=>{if(a!=="anime"||!h)return null;const e=h.timeUntilAiring;if(e<=0)return null;const n=Math.floor(e/(24*60*60)),i=Math.floor(e%(24*60*60)/(60*60));let u="";return n>0?u=`${n}d ${i}h`:i>0?u=`${i}h`:u="<1h",t("div",{className:"next-episode-info",children:["Ep ",h.episode," in ",u]})},c=p((e,n="w500")=>{if(!e)return"https://via.placeholder.com/500x750/1a1a1a/ffffff?text=No+Image";if(e.startsWith("http"))return L(e);const i=ee.replace("w500",n);return L(`${i}${e}`)},[]),[J,k]=te(()=>c(o,"w200")),K=p(()=>{k(c(o,"w500"))},[o,c]),Q=p(()=>{k(c(o,"w200"))},[o,c]),X=t("div",{className:`poster-wrapper ${a==="anime"?"anime-card-enhanced":""}`,onMouseEnter:K,onMouseLeave:Q,children:[t("img",{src:J,alt:U,loading:"lazy",width:"400",height:"600"}),t("div",{className:"scrim"}),V(),T>.01&&t("div",{className:"progress-bar-container",children:t("div",{className:"progress-bar",style:{width:`${Math.min(T,100)}%`}})}),t("div",{className:"card-info",children:[t("div",{className:"title-row",children:[t("h3",{className:"card-title",children:U}),d&&t("button",{className:`favorite-btn ${v?"favorited":""}`,onClick:z,"aria-label":v?"Remove from favorites":"Add to favorites",disabled:!q,children:"♥︎"})]}),F&&t("p",{className:"card-subtitle",children:F}),W(),a==="anime"&&g&&g.length>0&&t("p",{className:"studio-info",children:g[0].name}),t("span",{className:"rating",children:["★ ",x?x.toFixed(1):"N/A"]})]}),D&&t("button",{className:"delete-btn",onClick:e=>{e.preventDefault(),e.stopPropagation(),N&&N(s)},children:"×"})]});return t("div",{className:"movie-card-container",children:t("div",{className:"movie-card clickable",onClick:O,children:X})})};export{le as M};
//# sourceMappingURL=MovieCard-DnFfwScB.js.map
