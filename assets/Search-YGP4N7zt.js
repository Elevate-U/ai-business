import{A,u as e,L}from"./index-D_4x1Yiq.js";import{d as c,y as k}from"./react-vendor-BYlzYzcd.js";import{M as q}from"./MovieCard-CDjwaIjv.js";/* empty css             */const I=f=>{const[o,t]=c([]),[S,m]=c(!1),[d,w]=c(""),[l,g]=c("all"),[p,v]=c({anilist:!1,tmdb:!1});k(()=>{const s=new URLSearchParams(f.url?.split("?")[1]||""),i=s.get("q"),n=s.get("filter")||"all";w(i||""),g(n),i?y(i,n):t([])},[f.url]);const y=async(s,i="all")=>{m(!0);try{const n=`${A}/search/unified?query=${encodeURIComponent(s)}&type=${i}`,b=await fetch(n);if(b.ok){const a=await b.json();v({anilist:a.anilist&&Array.isArray(a.anilist)&&a.anilist.length>0,tmdb:a.tmdb&&(a.tmdb.movies&&Array.isArray(a.tmdb.movies)&&a.tmdb.movies.length>0||a.tmdb.tv&&Array.isArray(a.tmdb.tv)&&a.tmdb.tv.length>0)}),a.combined&&Array.isArray(a.combined)?t(a.combined):(console.warn("Combined data is missing or not an array"),t([])),m(!1);return}console.log("Falling back to TMDB search API");const u=await(await fetch(`${A}/tmdb/search/multi?query=${encodeURIComponent(s)}`)).json();if(u&&u.results){let a=u.results;i!=="all"&&(a=a.filter(r=>r.media_type===i));const $=a.filter(r=>(r.media_type==="movie"||r.media_type==="tv")&&(r.poster_path||r.backdrop_path)).filter((r,_,C)=>_===C.findIndex(N=>N.id===r.id&&N.media_type===r.media_type));t($),v({anilist:!1,tmdb:!0})}}catch(n){console.error("Error performing search:",n),t([])}finally{m(!1)}},h=s=>{const i=new URL(window.location.href);i.searchParams.set("filter",s),window.history.replaceState({},"",i),g(s),y(d,s)},R=(s,i)=>e("div",{className:"movie-card-container",children:[e(q,{item:s,type:s.media_type||(s.episodes?"anime":"movie"),progress:null,duration:null}),s.source&&e("div",{className:`source-badge source-${s.source}`,children:s.source==="anilist"?"AL":"TMDB"})]},`${s.media_type||"item"}-${s.id}-${i}`);return e("div",{className:"container home-page",children:[e("div",{className:"search-header",children:[e("h1",{className:"main-title",children:"Search Results"}),e("div",{className:"search-query-display",children:[e("span",{className:"search-label",children:"Showing results for:"}),e("span",{className:"search-query",children:['"',d,'"']})]}),e("div",{className:"search-sources",children:[p.anilist&&e("span",{className:"data-source anilist",children:"AniList"}),p.tmdb&&e("span",{className:"data-source tmdb",children:"TMDB"})]}),e("div",{className:"search-filters",children:[e("button",{className:`filter-btn ${l==="all"?"active":""}`,onClick:()=>h("all"),children:"All"}),e("button",{className:`filter-btn ${l==="movie"?"active":""}`,onClick:()=>h("movie"),children:"Movies"}),e("button",{className:`filter-btn ${l==="tv"?"active":""}`,onClick:()=>h("tv"),children:"TV Shows"}),e("button",{className:`filter-btn ${l==="anime"?"active":""}`,onClick:()=>h("anime"),children:"Anime"})]})]}),S?e(L,{text:"Searching across multiple sources..."}):o.length>0?e("section",{className:"home-section",children:[e("h2",{children:["Found ",o.length," result",o.length!==1?"s":""]}),e("div",{className:"movie-grid",children:o.map(R)})]}):d?e("div",{className:"no-results",children:[e("div",{className:"no-results-icon",children:"üîç"}),e("h3",{children:"No results found"}),e("p",{children:[`We couldn't find anything for "`,d,'" in the ',l==="all"?"database":l," category."]}),e("div",{className:"search-suggestions",children:[e("p",{children:"Try:"}),e("ul",{children:[e("li",{children:"Using different keywords or spelling"}),e("li",{children:"Searching in a different category"}),e("li",{children:"Using the title in its original language"}),e("li",{children:"Searching for something more general"})]})]})]}):e("div",{className:"search-welcome",children:[e("div",{className:"search-welcome-icon",children:"üé¨"}),e("h3",{children:"Start your search"}),e("p",{children:"Search across multiple sources including TMDB and AniList."})]})]})};export{I as default};
//# sourceMappingURL=Search-YGP4N7zt.js.map
