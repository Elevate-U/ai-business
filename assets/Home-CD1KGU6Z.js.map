{"version":3,"file":"Home-CD1KGU6Z.js","sources":["../../src/components/FeaturesShowcase.jsx","../../src/components/WelcomeMessage.jsx","../../src/pages/Home.jsx"],"sourcesContent":["import { h } from 'preact';\nimport { Link } from 'preact-router';\nimport './FeaturesShowcase.css';\n\nconst FeaturesShowcase = () => {\n    const features = [\n        {\n            icon: '‚èØÔ∏è',\n            title: 'Continue Watching',\n            description: 'Pick up exactly where you left off across all your devices. Never lose your place again.',\n            highlight: true\n        },\n        {\n            icon: '‚ù§Ô∏è',\n            title: 'Favorites Collection',\n            description: 'Save your favorite movies and TV shows in one place for quick access anytime.',\n            highlight: false\n        },\n        {\n            icon: 'üìö',\n            title: 'Watch History',\n            description: 'Keep track of everything you\\'ve watched and easily find content you enjoyed.',\n            highlight: false\n        },\n        {\n            icon: 'üéØ',\n            title: 'Personal Progress',\n            description: 'Sync your watch progress across devices and resume on any screen seamlessly.',\n            highlight: false\n        },\n        {\n            icon: 'üîç',\n            title: 'Smart Recommendations',\n            description: 'Get personalized suggestions based on your viewing history and preferences.',\n            highlight: false\n        },\n        {\n            icon: '‚ö°',\n            title: 'Enhanced Experience',\n            description: 'Unlock the full potential of Fylm with user-specific features and settings.',\n            highlight: false\n        }\n    ];\n\n    return (\n        <div class=\"features-showcase\">\n            <div class=\"features-hero\">\n                <div class=\"features-hero-content\">\n                    <h2 class=\"features-title\">\n                        <span class=\"gradient-text\">Sign in for the full experience</span>\n                    </h2>\n                    <p class=\"features-subtitle\">\n                        Get personalized recommendations, track your progress, and never lose your place\n                    </p>\n                </div>\n            </div>\n            \n            <div class=\"features-grid\">\n                {features.map((feature, index) => (\n                    <div key={index} class={`feature-card ${feature.highlight ? 'featured' : ''}`}>\n                        <div class=\"feature-icon\">{feature.icon}</div>\n                        <h3 class=\"feature-title\">{feature.title}</h3>\n                        <p class=\"feature-description\">{feature.description}</p>\n                    </div>\n                ))}\n            </div>\n            \n            <div class=\"features-footer\">\n                <div class=\"features-stats\">\n                    <div class=\"stat\">\n                        <span class=\"stat-number\">10K+</span>\n                        <span class=\"stat-label\">Movies & Shows</span>\n                    </div>\n                    <div class=\"stat\">\n                        <span class=\"stat-number\">4K</span>\n                        <span class=\"stat-label\">Ultra HD Quality</span>\n                    </div>\n                    <div class=\"stat\">\n                        <span class=\"stat-number\">‚àû</span>\n                        <span class=\"stat-label\">Unlimited Access</span>\n                    </div>\n                </div>\n                <p class=\"features-note\">\n                    <Link href=\"/login\" class=\"subtle-link\">Sign in</Link> or <Link href=\"/signup\" class=\"subtle-link\">create an account</Link> to unlock these features\n                </p>\n            </div>\n        </div>\n    );\n};\n\nexport default FeaturesShowcase; ","import { h } from 'preact';\nimport { useAuth } from '../context/Auth';\nimport './WelcomeMessage.css';\n\nconst WelcomeMessage = () => {\n    const { user, profile } = useAuth();\n    \n    if (!user) return null;\n\n    const getTimeGreeting = () => {\n        const hour = new Date().getHours();\n        if (hour < 12) return 'Good morning';\n        if (hour < 17) return 'Good afternoon';\n        return 'Good evening';\n    };\n\n    const getFirstName = () => {\n        const name = profile?.full_name || user.user_metadata?.full_name;\n        if (name) {\n            return name.split(' ')[0];\n        }\n        return user.email.split('@')[0];\n    };\n\n    return (\n        <div class=\"welcome-message\">\n            <div class=\"welcome-content\">\n                <h2 class=\"welcome-title\">\n                    {getTimeGreeting()}, <span class=\"user-name\">{getFirstName()}</span>!\n                </h2>\n                <p class=\"welcome-subtitle\">\n                    What would you like to watch today?\n                </p>\n            </div>\n            <div class=\"welcome-stats\">\n                <div class=\"stat-item\">\n                    <span class=\"stat-icon\">üé¨</span>\n                    <span class=\"stat-text\">Unlimited Movies</span>\n                </div>\n                <div class=\"stat-item\">\n                    <span class=\"stat-icon\">üì∫</span>\n                    <span class=\"stat-text\">TV Shows</span>\n                </div>\n                <div class=\"stat-item\">\n                    <span class=\"stat-icon\">‚ö°</span>\n                    <span class=\"stat-text\">HD Streaming</span>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default WelcomeMessage; ","import { h } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\nimport { useStore } from '../store';\nimport MovieCard from '../components/MovieCard';\nimport { getContinueWatching } from '../utils/watchHistory';\nimport { useAuth } from '../context/Auth';\nimport { API_BASE_URL } from '../config';\nimport FeaturesShowcase from '../components/FeaturesShowcase';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport WelcomeMessage from '../components/WelcomeMessage';\nimport './Home.css';\n\nconst Home = (props) => {\n    const { \n        trending, \n        popularMovies, \n        popularTv, \n        topRatedMovies, \n        topRatedTv,\n        upcomingMovies,\n        nowPlayingMovies,\n        airingTodayTv,\n        fetchTrending,\n        fetchPopularMovies,\n        fetchPopularTv,\n        fetchTopRatedMovies,\n        fetchTopRatedTv,\n        fetchUpcomingMovies,\n        fetchNowPlayingMovies,\n        fetchAiringTodayTv,\n        continueWatching,\n        continueWatchingFetched,\n        fetchContinueWatching,\n        fetchFavorites,\n        favoritesFetched,\n    isFavorited\n    } = useStore();\n    \n    const { user } = useAuth(); // Add auth context\n    const [mediaType, setMediaType] = useState('all');\n\n    useEffect(() => {\n        if (props.path === '/movies') {\n            setMediaType('movie');\n        } else if (props.path === '/tv') {\n            setMediaType('tv');\n        } else {\n            setMediaType('all');\n        }\n    }, [props.path]);\n\n    useEffect(() => {\n        // Fetch initial data if not already in store\n        fetchTrending();\n        fetchPopularMovies();\n        fetchPopularTv();\n        fetchTopRatedMovies();\n        fetchTopRatedTv();\n        fetchUpcomingMovies();\n        fetchNowPlayingMovies();\n        fetchAiringTodayTv();\n    }, [fetchTrending, fetchPopularMovies, fetchPopularTv, fetchTopRatedMovies, fetchTopRatedTv, fetchUpcomingMovies, fetchNowPlayingMovies, fetchAiringTodayTv]);\n\n    useEffect(() => {\n        if (user && !continueWatchingFetched) {\n            fetchContinueWatching();\n        }\n    }, [user, continueWatchingFetched, fetchContinueWatching]);\n\n    useEffect(() => {\n        if (user && !favoritesFetched) {\n            fetchFavorites();\n        }\n    }, [user, favoritesFetched, fetchFavorites]);\n\n    const renderSection = (title, items, media_type) => {\n        // A loading placeholder can be shown here if you have a generic loading state\n        if (!items || items.length === 0) {\n            return null;\n        }\n        \n        const uniqueItems = items.filter((item, index, self) =>\n            index === self.findIndex((t) => t.id === item.id)\n        );\n\n        return (\n            <section class=\"home-section\">\n                <h2>{title}</h2>\n                <div class=\"scrolling-row\">\n                    {uniqueItems.map(item => (\n                        <MovieCard \n                            key={`${title}-${item.id}`} \n                            item={item} \n                            type={media_type || item.media_type}\n                        />\n                    ))}\n                </div>\n            </section>\n        );\n    };\n\n    return (\n        <div class=\"container home-page\">\n            <h1 class=\"main-title\">\n                {mediaType === 'movie' && 'Movies'}\n                {mediaType === 'tv' && 'TV Shows'}\n                {mediaType === 'all' && 'Discover'}\n            </h1>\n\n            {/* Show Features Showcase for non-logged-in users */}\n            {!user && mediaType === 'all' && (\n                <>\n                    <div class=\"guest-info-banner\" style={{\n                        backgroundColor: 'var(--bg-secondary)',\n                        border: '1px solid var(--border-color)',\n                        borderRadius: '8px',\n                        padding: '16px',\n                        marginBottom: '24px',\n                        textAlign: 'center'\n                    }}>\n                        <h3 style={{ margin: '0 0 8px 0', color: 'var(--text-primary)' }}>\n                            üé¨ Start Streaming Instantly\n                        </h3>\n                        <p style={{ margin: '0', color: 'var(--text-secondary)' }}>\n                            No account required! Click any movie or TV show to start watching immediately. \n                            <a href=\"/login\" style={{ color: 'var(--accent-color)', textDecoration: 'none', marginLeft: '4px' }}>\n                                Sign up\n                            </a> to save favorites, track progress, and continue watching across devices.\n                        </p>\n                    </div>\n                    <FeaturesShowcase />\n                </>\n            )}\n            \n            {/* Show Welcome Message for logged-in users */}\n            {user && mediaType === 'all' && (\n                <WelcomeMessage />\n            )}\n\n            {!continueWatchingFetched ? (\n                <LoadingSpinner text=\"Loading your continue watching...\" />\n            ) : continueWatching.length > 0 && (\n                <section class=\"home-section\">\n                    <h2>Continue Watching</h2>\n                    <div class=\"scrolling-row scrolling-row--compact\">\n                        {continueWatching.map(item => (\n                            <MovieCard \n                                key={`continue-watching-${item.type}-${item.id}`} \n                                item={item} \n                                type={item.type} \n                                progress={item.progress_seconds}\n                                duration={item.duration_seconds}\n                            />\n                        ))}\n                    </div>\n                </section>\n            )}\n\n            {mediaType === 'all' && renderSection('Trending This Week', trending, 'movie')}\n            \n            {mediaType !== 'tv' && renderSection(\"Popular Movies\", popularMovies, 'movie')}\n            {mediaType !== 'tv' && renderSection(\"Now Playing Movies\", nowPlayingMovies, 'movie')}\n            {mediaType !== 'movie' && renderSection(\"Popular TV Shows\", popularTv, 'tv')}\n            \n            {(mediaType === 'all' || mediaType === 'movie') && renderSection('Top Rated Movies', topRatedMovies, 'movie')}\n            {(mediaType === 'all' || mediaType === 'movie') && renderSection('Upcoming Movies', upcomingMovies, 'movie')}\n            \n            {(mediaType === 'all' || mediaType === 'tv') && renderSection('Top Rated TV Shows', topRatedTv, 'tv')}\n            {(mediaType === 'all' || mediaType === 'tv') && renderSection('Airing Today', airingTodayTv, 'tv')}\n        </div>\n    );\n};\n\nexport default Home;\n"],"names":["FeaturesShowcase","jsxs","jsx","feature","index","Link","WelcomeMessage","user","profile","useAuth","getTimeGreeting","hour","getFirstName","name","Home","props","trending","popularMovies","popularTv","topRatedMovies","topRatedTv","upcomingMovies","nowPlayingMovies","airingTodayTv","fetchTrending","fetchPopularMovies","fetchPopularTv","fetchTopRatedMovies","fetchTopRatedTv","fetchUpcomingMovies","fetchNowPlayingMovies","fetchAiringTodayTv","continueWatching","continueWatchingFetched","fetchContinueWatching","fetchFavorites","favoritesFetched","isFavorited","useStore","mediaType","setMediaType","useState","useEffect","renderSection","title","items","media_type","uniqueItems","item","self","t","MovieCard","Fragment","LoadingSpinner"],"mappings":"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"}