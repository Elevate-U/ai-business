import{a as y,b as ee,j as D,I as se,u as n,$ as ae}from"./index-D_4x1Yiq.js";import{q as f,d as ne}from"./react-vendor-BYlzYzcd.js";const ce=({item:s,type:a,progress:_,duration:N,showDeleteButton:P,onDelete:$,onClick:x})=>{const{id:te,title:j,name:R,poster_path:H,still_path:B,vote_average:E,episode_name:I,season_number:w,episode_number:A,first_air_date:S,release_date:M,number_of_seasons:h,status:C,episodes:U,format:g,nextAiringEpisode:v,studios:p,genres:ie}=s,l=B||H,r=R||j,T=typeof r=="object"&&r!==null?r.english||r.romaji||r.native:r,F=_&&N>0?_/N*100:0,c=M||S?new Date(M||S).getFullYear():null,{user:o}=y(),{addFavorite:G,removeFavorite:b,isShowFavorited:Y,favoritesFetched:q}=ee(),u=Y(s.id,a,s.season_number,s.episode_number),z=e=>{e.preventDefault(),e.stopPropagation(),o&&(u?a==="anime"?(b(o.id,s.id,"anime"),b(o.id,s.id,"tv")):b(o.id,s.id,a,s.season_number,s.episode_number):G(o.id,{...s,type:a}))},O=e=>{if(e.preventDefault(),e.stopPropagation(),x)x(s);else{const t=a==="anime"&&s.anilist_id?s.anilist_id:s.id;let i=`/watch/${a}/${t}`;(a==="tv"||a==="anime")&&s.season_number&&s.episode_number?i+=`/season/${s.season_number}/episode/${s.episode_number}`:a==="anime"&&(i+="/season/1/episode/1"),ae(i)}},V=f(e=>{const t=e.target;t.onerror=null,t.src="https://via.placeholder.com/400x600/1a1a1a/ffffff?text=No+Image"},[]),k=(()=>{if((a==="tv"||a==="anime")&&w&&A)return`S${w} E${A}${I?`: ${I}`:""}`;if(a==="anime"){const e=[];return c&&e.push(c.toString()),U&&e.push(`${U} episodes`),g&&g!=="TV"&&e.push(g),e.length>0?e.join(" • "):"Anime"}else{if(a==="tv"&&h)return`${c||"Unknown"} • ${h} Season${h!==1?"s":""}`;if(a==="movie"&&c)return c.toString()}return null})(),W=()=>{if(a!=="anime"||!C)return null;const t={RELEASING:{text:"Airing",class:"airing"},FINISHED:{text:"Completed",class:"completed"},NOT_YET_RELEASED:{text:"Upcoming",class:"upcoming"},CANCELLED:{text:"Cancelled",class:"cancelled"},HIATUS:{text:"Hiatus",class:"hiatus"}}[C];return t?n("div",{className:`anime-status-badge ${t.class}`,children:t.text}):null},J=()=>{if(a!=="anime"||!v)return null;const e=v.timeUntilAiring;if(e<=0)return null;const t=Math.floor(e/(24*60*60)),i=Math.floor(e%(24*60*60)/(60*60));let m="";return t>0?m=`${t}d ${i}h`:i>0?m=`${i}h`:m="<1h",n("div",{className:"next-episode-info",children:["Ep ",v.episode," in ",m]})},d=f((e,t="w500")=>{if(!e)return"https://via.placeholder.com/500x750/1a1a1a/ffffff?text=No+Image";if(e.startsWith("http"))return D(e);const i=se.replace("w500",t);return D(`${i}${e}`)},[]),[K,L]=ne(()=>d(l,"w200")),Q=f(()=>{L(d(l,"w500"))},[l,d]),X=f(()=>{L(d(l,"w200"))},[l,d]),Z=n("div",{className:`poster-wrapper ${a==="anime"?"anime-card-enhanced":""}`,onMouseEnter:Q,onMouseLeave:X,children:[n("img",{src:K,alt:T,loading:"lazy",width:"400",height:"600",onError:V}),n("div",{className:"scrim"}),W(),F>.01&&n("div",{className:"progress-bar-container",children:n("div",{className:"progress-bar",style:{width:`${Math.min(F,100)}%`}})}),n("div",{className:"card-info",children:[n("div",{className:"title-row",children:[n("h3",{className:"card-title",children:T}),o&&n("button",{className:`favorite-btn ${u?"favorited":""}`,onClick:z,"aria-label":u?"Remove from favorites":"Add to favorites",disabled:!q,style:{color:u?"#fca5a5":"var(--text-secondary)"},children:"♥︎"})]}),k&&n("p",{className:"card-subtitle",children:k}),J(),a==="anime"&&p&&p.length>0&&n("p",{className:"studio-info",children:p[0].name}),n("span",{className:"rating",children:["★ ",E?E.toFixed(1):"N/A"]})]}),P&&n("button",{className:"delete-btn",onClick:e=>{e.preventDefault(),e.stopPropagation(),$&&$(s)},children:"×"})]});return n("div",{className:"movie-card-container",children:n("div",{className:"movie-card clickable",onClick:O,children:Z})})};export{ce as M};
//# sourceMappingURL=MovieCard-CDjwaIjv.js.map
