import{a as ae,b as re,k as j,I as ne,u as a,$ as ie}from"./index-BkQRV82z.js";import{q as H,d as V,A as oe,y as B}from"./react-vendor-BYlzYzcd.js";/* empty css                  */const he=({item:s,type:t,progress:$,duration:w,showDeleteButton:G,onDelete:E,onClick:I,useFullResolution:d=!1})=>{const{id:le,title:O,name:Y,poster_path:q,still_path:z,vote_average:A,episode_name:S,season_number:C,episode_number:U,first_air_date:T,release_date:M,number_of_seasons:v,status:k,episodes:D,format:p,nextAiringEpisode:b,studios:_,genres:ce}=s,i=z||q,o=Y||O,P=typeof o=="object"&&o!==null?o.english||o.romaji||o.native:o,F=$&&w>0?$/w*100:0,f=M||T?new Date(M||T).getFullYear():null,{user:l}=ae(),{addFavorite:R,removeFavorite:N,isShowFavorited:W,favoritesFetched:J}=re(),m=W(s.id,t,s.season_number,s.episode_number),K=e=>{e.preventDefault(),e.stopPropagation(),l&&(m?t==="anime"?(N(l.id,s.id,"anime"),N(l.id,s.id,"tv")):N(l.id,s.id,t,s.season_number,s.episode_number):R(l.id,{...s,type:t}))},Q=e=>{if(e.preventDefault(),e.stopPropagation(),I)I(s);else{const r=t==="anime"&&s.anilist_id?s.anilist_id:s.id;let n=`/watch/${t}/${r}`;(t==="tv"||t==="anime")&&s.season_number&&s.episode_number?n+=`/season/${s.season_number}/episode/${s.episode_number}`:t==="anime"&&(n+="/season/1/episode/1"),ie(n)}},X=H(e=>{const r=e.target;r.onerror=null,r.src="https://via.placeholder.com/400x600/1a1a1a/ffffff?text=No+Image"},[]),L=(()=>{if((t==="tv"||t==="anime")&&C&&U)return`S${C} E${U}${S?`: ${S}`:""}`;if(t==="anime"){const e=[];return f&&e.push(f.toString()),D&&e.push(`${D} episodes`),p&&p!=="TV"&&e.push(p),e.length>0?e.join(" • "):"Anime"}else{if(t==="tv"&&v)return`${f||"Unknown"} • ${v} Season${v!==1?"s":""}`;if(t==="movie"&&f)return f.toString()}return null})(),Z=()=>{if(t!=="anime"||!k)return null;const r={RELEASING:{text:"Airing",class:"airing"},FINISHED:{text:"Completed",class:"completed"},NOT_YET_RELEASED:{text:"Upcoming",class:"upcoming"},CANCELLED:{text:"Cancelled",class:"cancelled"},HIATUS:{text:"Hiatus",class:"hiatus"}}[k];return r?a("div",{className:`anime-status-badge ${r.class}`,children:r.text}):null},y=()=>{if(t!=="anime"||!b)return null;const e=b.timeUntilAiring;if(e<=0)return null;const r=Math.floor(e/(24*60*60)),n=Math.floor(e%(24*60*60)/(60*60));let g="";return r>0?g=`${r}d ${n}h`:n>0?g=`${n}h`:g="<1h",a("div",{className:"next-episode-info",children:["Ep ",b.episode," in ",g]})},c=H((e,r="w500")=>{if(!e)return"https://via.placeholder.com/500x750/1a1a1a/ffffff?text=No+Image";if(e.startsWith("http"))return j(e);const n=ne.replace("w500",r);return j(`${n}${e}`)},[]),[h,ee]=V(!1),[se,x]=V(()=>c(i,d?"w500":"w200")),u=oe(null);B(()=>{if(!u.current||d)return;const e=new IntersectionObserver(r=>{r.forEach(n=>{n.isIntersecting&&!h&&(ee(!0),x(c(i,"w500")))})},{rootMargin:"50px",threshold:.1});return e.observe(u.current),()=>{u.current&&e.unobserve(u.current)}},[i,c,d,h]),B(()=>{x(d?c(i,"w500"):c(i,h?"w500":"w200"))},[i,c,d,h]);const te=a("div",{className:`poster-wrapper ${t==="anime"?"anime-card-enhanced":""}`,children:[a("img",{src:se,alt:P,loading:"lazy",width:"400",height:"600",onError:X}),a("div",{className:"scrim"}),Z(),F>.01&&a("div",{className:"progress-bar-container",children:a("div",{className:"progress-bar",style:{width:`${Math.min(F,100)}%`}})}),a("div",{className:"card-info",children:[a("div",{className:"title-row",children:[a("h3",{className:"card-title",children:P}),l&&a("button",{className:`favorite-btn ${m?"favorited":""}`,onClick:K,"aria-label":m?"Remove from favorites":"Add to favorites",disabled:!J,style:{color:m?"#fca5a5":"var(--text-secondary)"},children:"♥︎"})]}),L&&a("p",{className:"card-subtitle",children:L}),y(),t==="anime"&&_&&_.length>0&&a("p",{className:"studio-info",children:_[0].name}),a("span",{className:"rating",children:["★ ",A?A.toFixed(1):"N/A"]})]}),G&&a("button",{className:"delete-btn",onClick:e=>{e.preventDefault(),e.stopPropagation(),E&&E(s)},children:"×"})]});return a("div",{className:"movie-card-container",ref:u,children:a("div",{className:"movie-card clickable",onClick:Q,children:te})})};export{he as M};
//# sourceMappingURL=MovieCard-BOeeRxEh.js.map
